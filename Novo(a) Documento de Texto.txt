 <!-- Formul√°rio de Identifica√ß√£o -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6" id="user-form">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">üë§ Identifica√ß√£o do Colaborador</h3>
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Nome Completo:</label>
                <input type="text" id="user-name" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none" 
                       placeholder="Digite seu nome completo" required>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Setor/Equipe:</label>
                <select id="user-team" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none">
                    <option value="">Selecione seu setor</option>
                    <option value="Cobran√ßa">Cobran√ßa</option>
                    <option value="Vendas">Vendas</option>
                    <option value="Atendimento">Atendimento</option>
                    <option value="Supervis√£o">Supervis√£o</option>
                    <option value="Outro">Outro</option>
                </select>
            </div>
            <button onclick="startTest()" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                üöÄ Iniciar Treinamento
            </button>
        </div>
    </div>

    <!-- Painel de Progresso -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6" id="progress-panel" style="display: none;">
        <div class="flex justify-between items-center mb-4">
            <div>
                <h3 class="text-lg font-semibold text-gray-800">Desempenho em Cobran√ßa</h3>
                <p class="text-sm text-gray-600">Colaborador: <span id="display-name" class="font-medium text-red-600"></span></p>
                <p class="text-sm text-gray-600">Cen√°rio <span id="current-scenario">1</span> de <span id="total-scenarios">10</span></p>
            </div>
            <div class="text-right">
                <div class="text-2xl font-bold text-green-600" id="score">0</div>
                <div class="text-sm text-gray-600">pontos</div>
            </div>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-3">
            <div class="bg-gradient-to-r from-red-500 to-orange-600 h-3 rounded-full transition-all duration-500" 
                 id="progress-bar" style="width: 0%"></div>
        </div>
    </div>

    <!-- √Årea do Cen√°rio -->
    <div class="scenario-card bg-white rounded-lg shadow-lg p-6 mb-6" id="scenario-container" style="display: none;">
        <!-- Conte√∫do ser√° inserido pelo JavaScript -->
    </div>

    <!-- Feedback -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6" id="feedback-container" style="display: none;">
        <div id="feedback-content"></div>
    </div>

    <!-- Bot√µes de Controle -->
    <div class="text-center">
        <button onclick="nextScenario()" id="next-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg mr-4 transition-colors" style="display: none;">
            Pr√≥ximo Cen√°rio ‚Üí
        </button>
        <button onclick="restartGame()" id="restart-btn" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors" style="display: none;">
            üîÑ Reiniciar Treinamento
        </button>
    </div>
</div>

<script>
    // Cen√°rios de cobran√ßa
    const scenarios = [
        {
            id: 1,
            title: "üìã Abertura da Cobran√ßa",
            situation: "Cliente com 15 dias de atraso. Primeira liga√ß√£o de cobran√ßa.",
            customer: "Al√¥?",
            debtInfo: "D√©bito: R$ 30,90 | Vencimento: 15 dias atr√°s",
            options: [
                {
                    text: "Bom dia! Estou ligando porque sua conta est√° em atraso e precisa ser paga hoje!",
                    correct: false,
                    feedback: "‚ùå Abordagem muito agressiva logo no in√≠cio. Pode gerar resist√™ncia e desligamento."
                },
                {
                    text: "Bom dia! Meu nome √© [Nome], do Cart√£o de TODOS. Posso falar com o Sr./Sra. [Nome]? Estou ligando para ajudar com a regulariza√ß√£o da sua mensalidade.",
                    correct: true,
                    feedback: "‚úÖ Perfeito! Abordagem profissional, educada e posicionou como ajuda, n√£o cobran√ßa agressiva."
                },
                {
                    text: "Oi, voc√™ est√° devendo R$ 30,90 do cart√£o.",
                    correct: false,
                    feedback: "‚ùå Muito direto e sem apresenta√ß√£o. Falta profissionalismo e pode causar constrangimento."
                }
            ]
        },
        {
            id: 2,
            title: "üí∞ Cliente Esqueceu de Pagar",
            situation: "Cliente reconhece o d√©bito e diz que esqueceu.",
            customer: "Ah, √© verdade! Esqueci completamente de atualizar os dados do cart√£o...",
            debtInfo: "D√©bito: R$ 30,90 | Cliente colaborativo",
            options: [
                {
                    text: "Sem problemas! Posso atualizar agora mesmo seus dados e regularizar. Tem o cart√£o em m√£os?",
                    correct: true,
                    feedback: "‚úÖ Excelente! Aproveitou a boa vontade do cliente e direcionou para solu√ß√£o imediata."
                },
                {
                    text: "Ent√£o precisa pagar hoje para n√£o ter mais problemas.",
                    correct: false,
                    feedback: "‚ùå Tom amea√ßador desnecess√°rio com cliente colaborativo. Perdeu oportunidade de fidelizar."
                },
                {
                    text: "Tudo bem, pode pagar quando puder.",
                    correct: false,
                    feedback: "‚ùå Muito passivo. N√£o direcionou para a√ß√£o imediata nem aproveitou a disposi√ß√£o do cliente."
                }
            ]
        },
        {
            id: 3,
            title: "üò§ Cliente Irritado",
            situation: "Cliente est√° irritado com a liga√ß√£o de cobran√ßa.",
            customer: "Que saco! Voc√™s ficam ligando toda hora! J√° disse que vou pagar!",
            debtInfo: "D√©bito: R$ 61,80 (2 meses) | Cliente irritado",
            options: [
                {
                    text: "Desculpe o inc√¥modo, mas √© nosso trabalho cobrar.",
                    correct: false,
                    feedback: "‚ùå Resposta defensiva que pode aumentar a irrita√ß√£o. N√£o mostrou empatia."
                },
                {
                    text: "Entendo sua irrita√ß√£o e pe√ßo desculpas. Estou aqui justamente para resolver isso de uma vez. Quando voc√™ consegue regularizar para pararmos de incomodar?",
                    correct: true,
                    feedback: "‚úÖ Perfeito! Mostrou empatia, pediu desculpas e direcionou para solu√ß√£o com benef√≠cio m√∫tuo."
                },
                {
                    text: "Se pagasse em dia, n√£o precisar√≠amos ligar!",
                    correct: false,
                    feedback: "‚ùå Resposta confrontativa que pode escalar o conflito e prejudicar a negocia√ß√£o."
                }
            ]
        },
        {
            id: 4,
            title: "üí∏ Dificuldade Financeira",
            situation: "Cliente alega dificuldades financeiras.",
            customer: "Olha, estou desempregado h√° 2 meses... N√£o tenho como pagar agora.",
            debtInfo: "D√©bito: R$ 92,70 (3 meses) | Situa√ß√£o financeira dif√≠cil",
            options: [
                {
                    text: "Entendo sua situa√ß√£o. Que tal cancelarmos o cart√£o para voc√™ n√£o ter mais essa preocupa√ß√£o?",
                    correct: false,
                    feedback: "‚ùå Ofereceu cancelamento muito rapidamente. Perdeu oportunidade de negociar e manter cliente."
                },
                {
                    text: "Compreendo sua dificuldade. Posso oferecer um desconto de 50% se conseguir pagar R$ 46,35 hoje, ou parcelar em 3x sem juros. O que funciona melhor?",
                    correct: true,
                    feedback: "‚úÖ Excelente! Mostrou empatia, ofereceu solu√ß√µes vi√°veis e deu op√ß√µes para o cliente escolher."
                },
                {
                    text: "Mas s√£o s√≥ R$ 30,90 por m√™s, n√£o √© muito dinheiro.",
                    correct: false,
                    feedback: "‚ùå Minimizou a dificuldade do cliente. Falta de empatia pode gerar revolta."
                }
            ]
        },
        {
            id: 5,
            title: "ü§î Cliente Questiona o Servi√ßo",
            situation: "Cliente diz que n√£o usa o cart√£o e questiona o valor.",
            customer: "Nunca usei esse cart√£o! Por que vou pagar por algo que n√£o uso?",
            debtInfo: "D√©bito: R$ 30,90 | Cliente questiona utilidade",
            options: [
                {
                    text: "O senhor contratou o servi√ßo, ent√£o tem que pagar independente de usar ou n√£o.",
                    correct: false,
                    feedback: "‚ùå Resposta inflex√≠vel que n√£o agrega valor nem resolve a obje√ß√£o do cliente."
                },
                {
                    text: "Entendo! Muitos clientes n√£o sabem usar todos os benef√≠cios. Que tal eu explicar como economizar nas consultas m√©dicas e depois regularizamos a conta?",
                    correct: true,
                    feedback: "‚úÖ √ìtimo! Transformou obje√ß√£o em oportunidade de mostrar valor e educar o cliente."
                },
                {
                    text: "Se n√£o quer usar, pode cancelar, mas tem que pagar o que deve.",
                    correct: false,
                    feedback: "‚ùå N√£o tentou resgatar o valor do produto nem negociar uma solu√ß√£o win-win."
                }
            ]
        },
        {
            id: 6,
            title: "üìÖ Negocia√ß√£o de Prazo",
            situation: "Cliente quer negociar prazo para pagamento.",
            customer: "Posso pagar, mas s√≥ no final do m√™s quando recebo. Pode ser dia 30?",
            debtInfo: "D√©bito: R$ 30,90 | Cliente prop√µe prazo",
            options: [
                {
                    text: "N√£o posso dar esse prazo. Tem que ser at√© amanh√£.",
                    correct: false,
                    feedback: "‚ùå Inflexibilidade desnecess√°ria com cliente que mostrou disposi√ß√£o para pagar."
                },
                {
                    text: "Perfeito! Vou agendar para dia 30. Posso confirmar seus dados para garantir que o d√©bito seja processado corretamente?",
                    correct: true,
                    feedback: "‚úÖ Excelente! Aceitou proposta razo√°vel e aproveitou para confirmar dados, garantindo o pagamento."
                },
                {
                    text: "Ok, dia 30 ent√£o. Tchau.",
                    correct: false,
                    feedback: "‚ùå N√£o confirmou dados nem criou compromisso formal. Alto risco de inadimpl√™ncia."
                }
            ]
        },
        {
            id: 7,
            title: "üè• Refor√ßando Valor do Produto",
            situation: "Cliente considera cancelar por n√£o ver valor.",
            customer: "Acho que vou cancelar mesmo... N√£o vejo vantagem nesse cart√£o.",
            debtInfo: "D√©bito: R$ 61,80 (2 meses) | Risco de cancelamento",
            options: [
                {
                    text: "Tudo bem, posso cancelar. Mas precisa quitar o d√©bito primeiro.",
                    correct: false,
                    feedback: "‚ùå Aceitou cancelamento facilmente sem tentar resgatar o cliente nem mostrar valor."
                },
                {
                    text: "Entendo sua preocupa√ß√£o. Sabia que uma consulta particular custa R$ 200? Com seu cart√£o, paga apenas R$ 30. Uma √∫nica consulta j√° paga 6 meses! Vale repensar?",
                    correct: true,
                    feedback: "‚úÖ Perfeito! Mostrou valor concreto com compara√ß√£o clara e questionou a decis√£o de forma inteligente."
                },
                {
                    text: "O cart√£o √© muito bom, voc√™ que n√£o sabe usar.",
                    correct: false,
                    feedback: "‚ùå Culpou o cliente em vez de educar. Abordagem que pode gerar conflito."
                }
            ]
        },
        {
            id: 8,
            title: "üéØ Fechamento com Desconto",
            situation: "Cliente aceita pagar com desconto oferecido.",
            customer: "Ok, aceito pagar os 50% de desconto que voc√™ ofereceu. Como fa√ßo?",
            debtInfo: "D√©bito: R$ 92,70 ‚Üí R$ 46,35 (com desconto)",
            options: [
                {
                    text: "√ìtimo! Vou processar agora. Qual cart√£o voc√™ vai usar para o d√©bito de R$ 46,35?",
                    correct: true,
                    feedback: "‚úÖ Perfeito! Assumiu controle, confirmou valor e direcionou para a√ß√£o imediata."
                },
                {
                    text: "Legal! Vou te passar para o financeiro fazer o acordo.",
                    correct: false,
                    feedback: "‚ùå Perdeu momentum da negocia√ß√£o. Transfer√™ncias podem gerar desist√™ncia."
                },
                {
                    text: "Que bom! Voc√™ pode pagar quando quiser.",
                    correct: false,
                    feedback: "‚ùå N√£o direcionou para pagamento imediato. Cliente pode mudar de ideia."
                }
            ]
        },
        {
            id: 9,
            title: "‚ö†Ô∏è Cliente Amea√ßa Processar",
            situation: "Cliente amea√ßa com a√ß√£o legal por cobran√ßa.",
            customer: "Voc√™s est√£o me perturbando! Vou processar essa empresa por ass√©dio!",
            debtInfo: "D√©bito: R$ 123,60 (4 meses) | Cliente amea√ßador",
            options: [
                {
                    text: "Pode processar! Voc√™ que est√° devendo!",
                    correct: false,
                    feedback: "‚ùå Confronto direto pode escalar situa√ß√£o. Resposta inadequada para situa√ß√£o tensa."
                },
                {
                    text: "Lamento que se sinta assim. Nosso objetivo √© apenas regularizar sua situa√ß√£o. Posso anotar sua solicita√ß√£o para reduzir contatos e focarmos numa solu√ß√£o?",
                    correct: true,
                    feedback: "‚úÖ Excelente! Manteve calma, mostrou empatia e direcionou para solu√ß√£o construtiva."
                },
                {
                    text: "Desculpa, vou cancelar sua conta ent√£o.",
                    correct: false,
                    feedback: "‚ùå Cedeu √† press√£o sem tentar resolver. Perdeu oportunidade de recuperar d√©bito."
                }
            ]
        },
        {
            id: 10,
            title: "üéâ Recupera√ß√£o Bem-sucedida",
            situation: "Cliente pagou e quer continuar usando o cart√£o.",
            customer: "Pronto, acabei de pagar! Obrigado pela paci√™ncia. Como fa√ßo para usar melhor o cart√£o?",
            debtInfo: "D√©bito: QUITADO ‚úÖ | Cliente satisfeito",
            options: [
                {
                    text: "Que bom que pagou! Tchau!",
                    correct: false,
                    feedback: "‚ùå Perdeu oportunidade de fidelizar cliente e educar sobre benef√≠cios."
                },
                {
                    text: "Perfeito! Obrigado pelo pagamento. Vou te enviar por SMS os principais parceiros para consultas e descontos. Sua fam√≠lia toda pode usar!",
                    correct: true,
                    feedback: "‚úÖ Excelente! Agradeceu, ofereceu valor adicional e refor√ßou benef√≠cio familiar. Cliente fidelizado!"
                },
                {
                    text: "Ok, est√° regularizado. N√£o atrase mais.",
                    correct: false,
                    feedback: "‚ùå Tom de advert√™ncia desnecess√°rio com cliente que colaborou. Pode gerar m√° impress√£o."
                }
            ]
        }
    ];

    let currentScenarioIndex = 0;
    let score = 0;
    let totalScenarios = scenarios.length;
    let userName = '';
    let userTeam = '';
    let testStartTime = null;
    let testEndTime = null;

    function startTest() {
        const nameInput = document.getElementById('user-name');
        const teamSelect = document.getElementById('user-team');
        
        if (!nameInput.value.trim()) {
            alert('Por favor, digite seu nome completo.');
            nameInput.focus();
            return;
        }
        
        if (!teamSelect.value) {
            alert('Por favor, selecione seu setor.');
            teamSelect.focus();
            return;
        }
        
        userName = nameInput.value.trim();
        userTeam = teamSelect.value;
        testStartTime = new Date();
        
        // Ocultar formul√°rio e mostrar teste
        document.getElementById('user-form').style.display = 'none';
        document.getElementById('progress-panel').style.display = 'block';
        document.getElementById('scenario-container').style.display = 'block';
        document.getElementById('display-name').textContent = userName;
        
        loadScenario();
    }

    function loadScenario() {
        const scenario = scenarios[currentScenarioIndex];
        const container = document.getElementById('scenario-container');
        
        container.innerHTML = `
            <div class="mb-6">
                <h3 class="text-xl font-bold text-gray-800 mb-3">${scenario.title}</h3>
                <div class="bg-red-50 rounded-lg p-4 mb-4">
                    <p class="text-gray-700 mb-3"><strong>Situa√ß√£o:</strong> ${scenario.situation}</p>
                    <div class="debt-indicator bg-red-100 border-l-4 border-red-500 p-3 rounded mb-3">
                        <p class="text-red-800 font-medium">üí≥ ${scenario.debtInfo}</p>
                    </div>
                    <div class="bg-white rounded-lg p-3 border-l-4 border-orange-500">
                        <p class="text-gray-800"><strong>Cliente:</strong> "${scenario.customer}"</p>
                    </div>
                </div>
                <h4 class="text-lg font-semibold text-gray-800 mb-3">Como voc√™ responderia?</h4>
                <div class="space-y-3">
                    ${scenario.options.map((option, index) => `
                        <button class="option-button w-full text-left p-4 bg-gray-50 hover:bg-gray-100 rounded-lg border-2 border-gray-200 transition-all"
                                onclick="selectOption(${index})">
                            <span class="font-medium text-gray-800">${String.fromCharCode(65 + index)})</span>
                            <span class="ml-2 text-gray-700">${option.text}</span>
                        </button>
                    `).join('')}
                </div>
            </div>
        `;

        // Atualizar indicadores
        document.getElementById('current-scenario').textContent = currentScenarioIndex + 1;
        document.getElementById('total-scenarios').textContent = totalScenarios;
        updateProgressBar();
    }

    function selectOption(optionIndex) {
        const scenario = scenarios[currentScenarioIndex];
        const option = scenario.options[optionIndex];
        const buttons = document.querySelectorAll('.option-button');
        
        // Desabilitar todos os bot√µes
        buttons.forEach(btn => btn.style.pointerEvents = 'none');
        
        // Destacar resposta selecionada
        const selectedButton = buttons[optionIndex];
        
        if (option.correct) {
            selectedButton.classList.add('correct-answer');
            selectedButton.className = selectedButton.className.replace('bg-gray-50', 'bg-green-100 border-green-500');
            score += 100;
            document.getElementById('score').textContent = score;
        } else {
            selectedButton.classList.add('incorrect-answer');
            selectedButton.className = selectedButton.className.replace('bg-gray-50', 'bg-red-100 border-red-500');
            
            // Mostrar resposta correta
            scenario.options.forEach((opt, idx) => {
                if (opt.correct) {
                    buttons[idx].className = buttons[idx].className.replace('bg-gray-50', 'bg-green-100 border-green-500');
                }
            });
        }

        // Mostrar feedback
        showFeedback(option.feedback, option.correct);
        
        // Mostrar bot√£o pr√≥ximo
        document.getElementById('next-btn').style.display = 'inline-block';
    }

    function showFeedback(message, isCorrect) {
        const container = document.getElementById('feedback-container');
        const content = document.getElementById('feedback-content');
        
        const bgColor = isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200';
        const textColor = isCorrect ? 'text-green-800' : 'text-red-800';
        
        content.innerHTML = `
            <div class="border-2 rounded-lg p-4 ${bgColor}">
                <p class="font-medium ${textColor}">${message}</p>
                ${isCorrect ? 
                    '<p class="text-green-600 text-sm mt-2">+100 pontos! √ìtima abordagem! üéØ</p>' : 
                    '<p class="text-red-600 text-sm mt-2">Continue praticando! A empatia √© fundamental na cobran√ßa! üí™</p>'
                }
            </div>
        `;
        
        container.style.display = 'block';
    }

    function nextScenario() {
        currentScenarioIndex++;
        
        if (currentScenarioIndex >= totalScenarios) {
            showFinalResults();
        } else {
            document.getElementById('feedback-container').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';
            loadScenario();
        }
    }

    function showFinalResults() {
        testEndTime = new Date();
        const testDuration = Math.round((testEndTime - testStartTime) / 1000 / 60); // em minutos
        const container = document.getElementById('scenario-container');
        const percentage = (score / (totalScenarios * 100)) * 100;
        
        let performance, message, emoji;
        if (percentage >= 90) {
            performance = "Especialista em Cobran√ßa! üèÜ";
            message = "Parab√©ns! Voc√™ domina a arte da cobran√ßa humanizada e eficaz!";
            emoji = "üéâ";
        } else if (percentage >= 70) {
            performance = "Cobrador Eficiente! üëç";
            message = "Muito bem! Voc√™ tem boa t√©cnica, continue aprimorando!";
            emoji = "üí™";
        } else if (percentage >= 50) {
            performance = "Em Desenvolvimento üìà";
            message = "Voc√™ est√° evoluindo! Foque na empatia e negocia√ß√£o!";
            emoji = "üéØ";
        } else {
            performance = "Precisa Melhorar üìö";
            message = "Continue treinando! A cobran√ßa eficaz √© uma habilidade que se desenvolve!";
            emoji = "üí°";
        }

        // Enviar dados para o servidor (simulado)
        sendResultsToServer();

        container.innerHTML = `
            <div class="text-center celebration">
                <div class="text-6xl mb-4">${emoji}</div>
                <h3 class="text-2xl font-bold text-gray-800 mb-2">${performance}</h3>
                <p class="text-lg text-gray-600 mb-4">${message}</p>
                
                <!-- Dados do Colaborador -->
                <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-4">
                    <h4 class="font-bold text-blue-800 mb-2">üìã Dados do Teste</h4>
                    <div class="text-sm text-blue-700 space-y-1">
                        <p><strong>Colaborador:</strong> ${userName}</p>
                        <p><strong>Setor:</strong> ${userTeam}</p>
                        <p><strong>Data:</strong> ${testEndTime.toLocaleDateString('pt-BR')}</p>
                        <p><strong>Hor√°rio:</strong> ${testEndTime.toLocaleTimeString('pt-BR')}</p>
                        <p><strong>Dura√ß√£o:</strong> ${testDuration} minutos</p>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-red-50 to-orange-50 rounded-lg p-6 mb-6">
                    <div class="text-3xl font-bold text-red-600 mb-2">${score} pontos</div>
                    <div class="text-lg text-gray-700">${percentage.toFixed(0)}% de aproveitamento</div>
                </div>
                
                <div class="bg-green-50 border-2 border-green-200 rounded-lg p-4 mb-4">
                    <h4 class="font-bold text-green-800 mb-2">‚úÖ Resultado Registrado!</h4>
                    <p class="text-sm text-green-700 mb-3">Seus dados foram salvos automaticamente.</p>
                    <button onclick="sendToWhatsApp()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                        üì± Enviar por WhatsApp
                    </button>
                </div>
                
                <div class="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4">
                    <h4 class="font-bold text-yellow-800 mb-2">üí° Princ√≠pios da Cobran√ßa Eficaz:</h4>
                    <ul class="text-sm text-yellow-700 text-left space-y-1">
                        <li>‚Ä¢ <strong>Empatia:</strong> Entenda a situa√ß√£o do cliente</li>
                        <li>‚Ä¢ <strong>Profissionalismo:</strong> Mantenha sempre o respeito</li>
                        <li>‚Ä¢ <strong>Solu√ß√µes:</strong> Ofere√ßa alternativas vi√°veis</li>
                        <li>‚Ä¢ <strong>Valor:</strong> Reforce os benef√≠cios do produto</li>
                        <li>‚Ä¢ <strong>Urg√™ncia:</strong> Direcione para a√ß√£o imediata</li>
                        <li>‚Ä¢ <strong>Fideliza√ß√£o:</strong> Transforme cobran√ßa em relacionamento</li>
                    </ul>
                </div>
            </div>
        `;

        document.getElementById('next-btn').style.display = 'none';
        document.getElementById('restart-btn').style.display = 'inline-block';
    }

    function updateProgressBar() {
        const progress = ((currentScenarioIndex) / totalScenarios) * 100;
        document.getElementById('progress-bar').style.width = progress + '%';
    }

    function sendResultsToServer() {
        const testData = {
            nome: userName,
            setor: userTeam,
            pontuacao: score,
            porcentagem: ((score / (totalScenarios * 100)) * 100).toFixed(0),
            data: testEndTime.toLocaleDateString('pt-BR'),
            horario: testEndTime.toLocaleTimeString('pt-BR'),
            duracao: Math.round((testEndTime - testStartTime) / 1000 / 60),
            cenarios_corretos: score / 100,
            total_cenarios: totalScenarios
        };

        // Enviar para Google Sheets
        sendToGoogleSheets(testData);
        
        // Salvar localmente tamb√©m (para backup)
        localStorage.setItem('ultimo_teste_cobranca', JSON.stringify(testData));
    }

    function sendToGoogleSheets(data) {
        // URL do Google Apps Script (voc√™ precisar√° criar e colar aqui)
        const GOOGLE_SCRIPT_URL = 'COLE_SUA_URL_DO_GOOGLE_SCRIPT_AQUI';
        
        // Tentar enviar para Google Sheets
        fetch(GOOGLE_SCRIPT_URL, {
            method: 'POST',
            mode: 'no-cors',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
        })
        .then(() => {
            console.log('‚úÖ Dados enviados para Google Sheets');
        })
        .catch(error => {
            console.log('‚ö†Ô∏è Erro ao enviar para Google Sheets:', error);
        });
    }

    function sendToWhatsApp() {
        const percentage = ((score / (totalScenarios * 100)) * 100).toFixed(0);
        const duration = Math.round((testEndTime - testStartTime) / 1000 / 60);
        
        const message = `üéØ *RESULTADO DO TREINAMENTO DE COBRAN√áA*
        
üë§ Colaborador: ${userName}
üè¢ Setor: ${userTeam}
üìÖ Data: ${testEndTime.toLocaleDateString('pt-BR')}
‚è∞ Hor√°rio: ${testEndTime.toLocaleTimeString('pt-BR')}
‚è±Ô∏è Dura√ß√£o: ${duration} minutos
üìä DESEMPENHO:
‚Ä¢ Pontua√ß√£o: ${score} pontos
‚Ä¢ Aproveitamento: ${percentage}%
‚Ä¢ Cen√°rios corretos: ${score/100}/${totalScenarios}
${percentage >= 90 ? 'üèÜ Especialista em Cobran√ßa!' :
percentage >= 70 ? 'üëç Cobrador Eficiente!' :
percentage >= 50 ? 'üìà Em Desenvolvimento' : 'üìö Precisa Melhorar'}
Enviado pelo Sistema de Treinamento - Cart√£o de TODOS`;
        // Substitua pelo seu n√∫mero (formato: 5511999999999)
        const phoneNumber = '5522999477421';
        const whatsappURL = `https://wa.me/${5522999477421}?text=${encodeURIComponent(message)}`;
        
        window.open(whatsappURL, '_blank');
    }

    function restartGame() {
        currentScenarioIndex = 0;
        score = 0;
        userName = '';
        userTeam = '';
        testStartTime = null;
        testEndTime = null;
        
        document.getElementById('score').textContent = score;
        document.getElementById('feedback-container').style.display = 'none';
        document.getElementById('next-btn').style.display = 'none';
        document.getElementById('restart-btn').style.display = 'none';
        document.getElementById('progress-panel').style.display = 'none';
        document.getElementById('scenario-container').style.display = 'none';
        document.getElementById('user-form').style.display = 'block';
        
        // Limpar campos
        document.getElementById('user-name').value = '';
        document.getElementById('user-team').value = '';
    }

    // Fun√ß√£o para gerar QR Code (demonstra√ß√£o)
    function generateQRCode() {
        const currentURL = window.location.href;
        console.log('üîó URL para QR Code:', currentURL);
        console.log('üì± Use um gerador de QR Code online com esta URL');
    }

    // Inicializar
    window.onload = function() {
        generateQRCode();
        console.log('üöÄ Sistema de treinamento carregado!');
        console.log('üìã Para ver os resultados, abra o Console do navegador ap√≥s completar um teste');
    };
</script>
